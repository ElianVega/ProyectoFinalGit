--------------------------------------------------------
-- Archivo creado  - martes-octubre-20-2020   
--------------------------------------------------------
DROP TABLE "PARKINGISTA"."AUTOMOVIL" cascade constraints;
DROP TABLE "PARKINGISTA"."CLIENTE" cascade constraints;
DROP TABLE "PARKINGISTA"."EMPLEADO" cascade constraints;
DROP TABLE "PARKINGISTA"."HORA_DE_MARCAJE" cascade constraints;
DROP TABLE "PARKINGISTA"."MARCA" cascade constraints;
DROP TABLE "PARKINGISTA"."PERSONA" cascade constraints;
DROP TABLE "PARKINGISTA"."REGISTRO" cascade constraints;
DROP TABLE "PARKINGISTA"."TIPO_CLIENTE" cascade constraints;
DROP TABLE "PARKINGISTA"."TRANSACCIONES_VEHICULARES" cascade constraints;
DROP TABLE "PARKINGISTA"."VEHICULO_COLOR" cascade constraints;
DROP VIEW "PARKINGISTA"."CLIENTE_TABLA";
DROP VIEW "PARKINGISTA"."COLORAUTO";
DROP VIEW "PARKINGISTA"."EMPLEADO_TABLA";
DROP VIEW "PARKINGISTA"."MARCAAUTO";
DROP VIEW "PARKINGISTA"."NOMBREPROPIETARIO";
DROP VIEW "PARKINGISTA"."TIPOSCLIENTES";
DROP PROCEDURE "PARKINGISTA"."INSERTARTRANSACCION";
DROP FUNCTION "PARKINGISTA"."CALCULAHORASTARDE";
DROP FUNCTION "PARKINGISTA"."CALCULAHORASTRABAJADAS";
--------------------------------------------------------
--  DDL for Table AUTOMOVIL
--------------------------------------------------------

  CREATE TABLE "PARKINGISTA"."AUTOMOVIL" 
   (	"PLACA" VARCHAR2(8 BYTE), 
	"COD_COLOR" VARCHAR2(30 BYTE), 
	"COD_MARCA" NUMBER, 
	"COD_CLIENTE" NUMBER(10,0), 
	"ELIMINADO" NUMBER(1,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table CLIENTE
--------------------------------------------------------

  CREATE TABLE "PARKINGISTA"."CLIENTE" 
   (	"COD_CLIENTE" NUMBER(10,0), 
	"CEDULA_CLIENTE" VARCHAR2(10 BYTE), 
	"COD_TIPO_CLIENTE" NUMBER(10,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table EMPLEADO
--------------------------------------------------------

  CREATE TABLE "PARKINGISTA"."EMPLEADO" 
   (	"COD_EMPLEADO" NUMBER(10,0), 
	"CEDULA_EMPLEADO" VARCHAR2(10 BYTE), 
	"HORA_ENTRADA_PREDETERMINADA" TIMESTAMP (6), 
	"HORA_SALIDA_PREDETERMINADA" TIMESTAMP (6), 
	"COD_REGISTRO" NUMBER(10,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table HORA_DE_MARCAJE
--------------------------------------------------------

  CREATE TABLE "PARKINGISTA"."HORA_DE_MARCAJE" 
   (	"COD_HORAS" NUMBER(10,0), 
	"HORA_ENTRADA_EMPLEADO" TIMESTAMP (6), 
	"HORA_SALIDA_EMPLEADO" TIMESTAMP (6), 
	"HORAS_TRABAJADAS" NUMBER, 
	"HORAS_TARDE" NUMBER, 
	"COD_REGISTRO" NUMBER(10,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table MARCA
--------------------------------------------------------

  CREATE TABLE "PARKINGISTA"."MARCA" 
   (	"COD_MARCA" NUMBER(10,0), 
	"MODELO" VARCHAR2(30 BYTE), 
	"MARCA" VARCHAR2(30 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table PERSONA
--------------------------------------------------------

  CREATE TABLE "PARKINGISTA"."PERSONA" 
   (	"CEDULA" VARCHAR2(10 BYTE), 
	"NOMBRE" VARCHAR2(50 BYTE), 
	"APELLIDO" VARCHAR2(50 BYTE), 
	"CELULAR" VARCHAR2(10 BYTE), 
	"CORREO" VARCHAR2(50 BYTE), 
	"SEXO" VARCHAR2(1 BYTE), 
	"FECHA_NACIMIENTO" DATE, 
	"EDAD" NUMBER(2,0), 
	"ELIMINADO" NUMBER(1,0) DEFAULT 1
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table REGISTRO
--------------------------------------------------------

  CREATE TABLE "PARKINGISTA"."REGISTRO" 
   (	"COD_REGISTRO" NUMBER(10,0), 
	"USUARIO" VARCHAR2(15 BYTE), 
	"CLAVE" VARCHAR2(10 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table TIPO_CLIENTE
--------------------------------------------------------

  CREATE TABLE "PARKINGISTA"."TIPO_CLIENTE" 
   (	"COD_TIPO" NUMBER(10,0), 
	"TIPO_CLIENTE" VARCHAR2(20 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table TRANSACCIONES_VEHICULARES
--------------------------------------------------------

  CREATE TABLE "PARKINGISTA"."TRANSACCIONES_VEHICULARES" 
   (	"COD_TRANSACCION" NUMBER(10,0), 
	"HORA_ENTRADA_V" TIMESTAMP (6), 
	"FECHA" DATE DEFAULT SYSDATE, 
	"FOTO" BLOB DEFAULT EMPTY_BLOB(), 
	"PLACA" VARCHAR2(8 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" 
 LOB ("FOTO") STORE AS SECUREFILE (
  TABLESPACE "USERS" ENABLE STORAGE IN ROW CHUNK 8192
  NOCACHE LOGGING  NOCOMPRESS  KEEP_DUPLICATES 
  STORAGE(INITIAL 106496 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)) ;
--------------------------------------------------------
--  DDL for Table VEHICULO_COLOR
--------------------------------------------------------

  CREATE TABLE "PARKINGISTA"."VEHICULO_COLOR" 
   (	"COD_COLOR" VARCHAR2(30 BYTE), 
	"COLOR" VARCHAR2(20 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for View CLIENTE_TABLA
--------------------------------------------------------

  CREATE OR REPLACE FORCE NONEDITIONABLE VIEW "PARKINGISTA"."CLIENTE_TABLA" ("CEDULA", "NOMBRE", "APELLIDO", "CELULAR", "TIPO_CLIENTE", "PLACA", "MARCA", "MODELO", "COLOR") AS 
  SELECT p.cedula, p.nombre, p.apellido, p.celular, t.tipo_cliente, a.placa, m.marca, m.modelo, v.color
from persona p, cliente c, tipo_cliente t, automovil a, vehiculo_color v, marca m 
where (p.cedula = c.cedula_cliente) and (t.cod_tipo = c.cod_tipo_cliente) and (c.cod_cliente = a.cod_cliente) and (a.cod_color = v.cod_color and m.cod_marca = a.cod_marca) 
and (p.eliminado = 1 and a.eliminado = 1)
;
--------------------------------------------------------
--  DDL for View COLORAUTO
--------------------------------------------------------

  CREATE OR REPLACE FORCE NONEDITIONABLE VIEW "PARKINGISTA"."COLORAUTO" ("COLOR") AS 
  select color from vehiculo_color
;
--------------------------------------------------------
--  DDL for View EMPLEADO_TABLA
--------------------------------------------------------

  CREATE OR REPLACE FORCE NONEDITIONABLE VIEW "PARKINGISTA"."EMPLEADO_TABLA" ("CEDULA", "NOMBRE", "APELLIDO", "CELULAR", "HORADEENTRADA", "HORADESALIDA") AS 
  SELECT p.cedula, p.nombre, p.apellido, p.celular, to_char(extract(hour from e.hora_entrada_predeterminada) ||':'|| extract(minute from e.hora_entrada_predeterminada)) as horaDeentrada, to_char(extract(hour from e.hora_salida_predeterminada) ||':'|| extract(minute from e.hora_salida_predeterminada)) as horaDesalida
from persona p join empleado e on p.cedula = e.cedula_Empleado where p.eliminado = 1
;
--------------------------------------------------------
--  DDL for View MARCAAUTO
--------------------------------------------------------

  CREATE OR REPLACE FORCE NONEDITIONABLE VIEW "PARKINGISTA"."MARCAAUTO" ("MARCA") AS 
  select DISTINCT Marca from marca
;
--------------------------------------------------------
--  DDL for View NOMBREPROPIETARIO
--------------------------------------------------------

  CREATE OR REPLACE FORCE NONEDITIONABLE VIEW "PARKINGISTA"."NOMBREPROPIETARIO" ("propietario", "PLACA") AS 
  (
select (p.nombre ||' '|| p.apellido) as "propietario", a.placa from persona p join cliente c on p.cedula = c.cedula_cliente join automovil a on a.cod_cliente = c.cod_cliente 
)
;
--------------------------------------------------------
--  DDL for View TIPOSCLIENTES
--------------------------------------------------------

  CREATE OR REPLACE FORCE NONEDITIONABLE VIEW "PARKINGISTA"."TIPOSCLIENTES" ("TIPO_CLIENTE") AS 
  select tipo_cliente from tipo_cliente
;
REM INSERTING into PARKINGISTA.AUTOMOVIL
SET DEFINE OFF;
Insert into PARKINGISTA.AUTOMOVIL (PLACA,COD_COLOR,COD_MARCA,COD_CLIENTE,ELIMINADO) values ('PP5870','#000000','119','104','1');
Insert into PARKINGISTA.AUTOMOVIL (PLACA,COD_COLOR,COD_MARCA,COD_CLIENTE,ELIMINADO) values ('PP587A0','#FFFFFF','126','106','1');
Insert into PARKINGISTA.AUTOMOVIL (PLACA,COD_COLOR,COD_MARCA,COD_CLIENTE,ELIMINADO) values ('PCL6133','#FFFFFF','105','101','1');
Insert into PARKINGISTA.AUTOMOVIL (PLACA,COD_COLOR,COD_MARCA,COD_CLIENTE,ELIMINADO) values ('DED500','#0000FF','126','106','1');
Insert into PARKINGISTA.AUTOMOVIL (PLACA,COD_COLOR,COD_MARCA,COD_CLIENTE,ELIMINADO) values ('CBA2897','#FFFFFF','119','103','1');
Insert into PARKINGISTA.AUTOMOVIL (PLACA,COD_COLOR,COD_MARCA,COD_CLIENTE,ELIMINADO) values ('ABB111','#COCOCO','103','106','1');
Insert into PARKINGISTA.AUTOMOVIL (PLACA,COD_COLOR,COD_MARCA,COD_CLIENTE,ELIMINADO) values ('XYZ321','#FFFF00','119','100','1');
Insert into PARKINGISTA.AUTOMOVIL (PLACA,COD_COLOR,COD_MARCA,COD_CLIENTE,ELIMINADO) values ('ABB754','#0000FF','126','102','1');
Insert into PARKINGISTA.AUTOMOVIL (PLACA,COD_COLOR,COD_MARCA,COD_CLIENTE,ELIMINADO) values ('GSU6858','#000000','109','105','1');
Insert into PARKINGISTA.AUTOMOVIL (PLACA,COD_COLOR,COD_MARCA,COD_CLIENTE,ELIMINADO) values ('ABC1234','#FF0000','111','108','1');
Insert into PARKINGISTA.AUTOMOVIL (PLACA,COD_COLOR,COD_MARCA,COD_CLIENTE,ELIMINADO) values ('TCS895','#000000','104','100','1');
Insert into PARKINGISTA.AUTOMOVIL (PLACA,COD_COLOR,COD_MARCA,COD_CLIENTE,ELIMINADO) values ('OBB1234','#000000','103','107','1');
REM INSERTING into PARKINGISTA.CLIENTE
SET DEFINE OFF;
Insert into PARKINGISTA.CLIENTE (COD_CLIENTE,CEDULA_CLIENTE,COD_TIPO_CLIENTE) values ('101','0245869401','104');
Insert into PARKINGISTA.CLIENTE (COD_CLIENTE,CEDULA_CLIENTE,COD_TIPO_CLIENTE) values ('103','0565515132','100');
Insert into PARKINGISTA.CLIENTE (COD_CLIENTE,CEDULA_CLIENTE,COD_TIPO_CLIENTE) values ('106','0284845121','102');
Insert into PARKINGISTA.CLIENTE (COD_CLIENTE,CEDULA_CLIENTE,COD_TIPO_CLIENTE) values ('102','0103055523','100');
Insert into PARKINGISTA.CLIENTE (COD_CLIENTE,CEDULA_CLIENTE,COD_TIPO_CLIENTE) values ('105','0304858541','104');
Insert into PARKINGISTA.CLIENTE (COD_CLIENTE,CEDULA_CLIENTE,COD_TIPO_CLIENTE) values ('107','0304505054','102');
Insert into PARKINGISTA.CLIENTE (COD_CLIENTE,CEDULA_CLIENTE,COD_TIPO_CLIENTE) values ('108','1212121324','100');
Insert into PARKINGISTA.CLIENTE (COD_CLIENTE,CEDULA_CLIENTE,COD_TIPO_CLIENTE) values ('100','0123456789','104');
Insert into PARKINGISTA.CLIENTE (COD_CLIENTE,CEDULA_CLIENTE,COD_TIPO_CLIENTE) values ('104','0305545648','100');
REM INSERTING into PARKINGISTA.EMPLEADO
SET DEFINE OFF;
Insert into PARKINGISTA.EMPLEADO (COD_EMPLEADO,CEDULA_EMPLEADO,HORA_ENTRADA_PREDETERMINADA,HORA_SALIDA_PREDETERMINADA,COD_REGISTRO) values ('100','0150563633',to_timestamp('06:00:00','HH24:MI:SS'),to_timestamp('14:00:00','HH24:MI:SS'),'100');
Insert into PARKINGISTA.EMPLEADO (COD_EMPLEADO,CEDULA_EMPLEADO,HORA_ENTRADA_PREDETERMINADA,HORA_SALIDA_PREDETERMINADA,COD_REGISTRO) values ('103','0104244945',to_timestamp('22:00:00','HH24:MI:SS'),to_timestamp('06:00:00','HH24:MI:SS'),'101');
Insert into PARKINGISTA.EMPLEADO (COD_EMPLEADO,CEDULA_EMPLEADO,HORA_ENTRADA_PREDETERMINADA,HORA_SALIDA_PREDETERMINADA,COD_REGISTRO) values ('102','0150691772',to_timestamp('14:00:00','HH24:MI:SS'),to_timestamp('22:00:00','HH24:MI:SS'),'102');
REM INSERTING into PARKINGISTA.HORA_DE_MARCAJE
SET DEFINE OFF;
Insert into PARKINGISTA.HORA_DE_MARCAJE (COD_HORAS,HORA_ENTRADA_EMPLEADO,HORA_SALIDA_EMPLEADO,HORAS_TRABAJADAS,HORAS_TARDE,COD_REGISTRO) values ('110',to_timestamp('08:49:56','HH24:MI:SS'),to_timestamp('08:50:06','HH24:MI:SS'),'0','2','100');
Insert into PARKINGISTA.HORA_DE_MARCAJE (COD_HORAS,HORA_ENTRADA_EMPLEADO,HORA_SALIDA_EMPLEADO,HORAS_TRABAJADAS,HORAS_TARDE,COD_REGISTRO) values ('108',to_timestamp('08:14:01','HH24:MI:SS'),to_timestamp('08:20:07','HH24:MI:SS'),'0','2','100');
Insert into PARKINGISTA.HORA_DE_MARCAJE (COD_HORAS,HORA_ENTRADA_EMPLEADO,HORA_SALIDA_EMPLEADO,HORAS_TRABAJADAS,HORAS_TARDE,COD_REGISTRO) values ('102',to_timestamp('01:39:51','HH24:MI:SS'),to_timestamp('01:40:04','HH24:MI:SS'),'0','-4','100');
Insert into PARKINGISTA.HORA_DE_MARCAJE (COD_HORAS,HORA_ENTRADA_EMPLEADO,HORA_SALIDA_EMPLEADO,HORAS_TRABAJADAS,HORAS_TARDE,COD_REGISTRO) values ('100',to_timestamp('00:48:09','HH24:MI:SS'),to_timestamp('01:00:55','HH24:MI:SS'),'0','-5','100');
Insert into PARKINGISTA.HORA_DE_MARCAJE (COD_HORAS,HORA_ENTRADA_EMPLEADO,HORA_SALIDA_EMPLEADO,HORAS_TRABAJADAS,HORAS_TARDE,COD_REGISTRO) values ('109',to_timestamp('08:46:37','HH24:MI:SS'),to_timestamp('08:49:29','HH24:MI:SS'),'0','2','100');
Insert into PARKINGISTA.HORA_DE_MARCAJE (COD_HORAS,HORA_ENTRADA_EMPLEADO,HORA_SALIDA_EMPLEADO,HORAS_TRABAJADAS,HORAS_TARDE,COD_REGISTRO) values ('111',to_timestamp('08:51:29','HH24:MI:SS'),to_timestamp('09:03:08','HH24:MI:SS'),'0','2','100');
Insert into PARKINGISTA.HORA_DE_MARCAJE (COD_HORAS,HORA_ENTRADA_EMPLEADO,HORA_SALIDA_EMPLEADO,HORAS_TRABAJADAS,HORAS_TARDE,COD_REGISTRO) values ('106',to_timestamp('08:05:58','HH24:MI:SS'),to_timestamp('08:12:43','HH24:MI:SS'),'0','2','100');
Insert into PARKINGISTA.HORA_DE_MARCAJE (COD_HORAS,HORA_ENTRADA_EMPLEADO,HORA_SALIDA_EMPLEADO,HORAS_TRABAJADAS,HORAS_TARDE,COD_REGISTRO) values ('103',to_timestamp('01:40:14','HH24:MI:SS'),to_timestamp('01:40:22','HH24:MI:SS'),'0','-4','100');
Insert into PARKINGISTA.HORA_DE_MARCAJE (COD_HORAS,HORA_ENTRADA_EMPLEADO,HORA_SALIDA_EMPLEADO,HORAS_TRABAJADAS,HORAS_TARDE,COD_REGISTRO) values ('104',to_timestamp('01:44:43','HH24:MI:SS'),to_timestamp('01:45:23','HH24:MI:SS'),'0','-4','100');
Insert into PARKINGISTA.HORA_DE_MARCAJE (COD_HORAS,HORA_ENTRADA_EMPLEADO,HORA_SALIDA_EMPLEADO,HORAS_TRABAJADAS,HORAS_TARDE,COD_REGISTRO) values ('105',to_timestamp('08:01:24','HH24:MI:SS'),to_timestamp('08:05:08','HH24:MI:SS'),'0','2','100');
Insert into PARKINGISTA.HORA_DE_MARCAJE (COD_HORAS,HORA_ENTRADA_EMPLEADO,HORA_SALIDA_EMPLEADO,HORAS_TRABAJADAS,HORAS_TARDE,COD_REGISTRO) values ('107',to_timestamp('06:13:28','HH24:MI:SS'),to_timestamp('06:13:30','HH24:MI:SS'),'0','0','100');
Insert into PARKINGISTA.HORA_DE_MARCAJE (COD_HORAS,HORA_ENTRADA_EMPLEADO,HORA_SALIDA_EMPLEADO,HORAS_TRABAJADAS,HORAS_TARDE,COD_REGISTRO) values ('101',to_timestamp('01:01:12','HH24:MI:SS'),to_timestamp('01:37:57','HH24:MI:SS'),'0','-4','100');
REM INSERTING into PARKINGISTA.MARCA
SET DEFINE OFF;
Insert into PARKINGISTA.MARCA (COD_MARCA,MODELO,MARCA) values ('106','CAMARO','CHEVROLET');
Insert into PARKINGISTA.MARCA (COD_MARCA,MODELO,MARCA) values ('108','SPARK','CHEVROLET');
Insert into PARKINGISTA.MARCA (COD_MARCA,MODELO,MARCA) values ('109','D-MAX','CHEVROLET');
Insert into PARKINGISTA.MARCA (COD_MARCA,MODELO,MARCA) values ('110','PICANTO','KIA');
Insert into PARKINGISTA.MARCA (COD_MARCA,MODELO,MARCA) values ('111','OPTIMA','KIA');
Insert into PARKINGISTA.MARCA (COD_MARCA,MODELO,MARCA) values ('112','SORENTO','KIA');
Insert into PARKINGISTA.MARCA (COD_MARCA,MODELO,MARCA) values ('113','SPORTEGE','KIA');
Insert into PARKINGISTA.MARCA (COD_MARCA,MODELO,MARCA) values ('114','RIO','KIA');
Insert into PARKINGISTA.MARCA (COD_MARCA,MODELO,MARCA) values ('115','E-SOUL','KIA');
Insert into PARKINGISTA.MARCA (COD_MARCA,MODELO,MARCA) values ('116','STINGER','KIA');
Insert into PARKINGISTA.MARCA (COD_MARCA,MODELO,MARCA) values ('117','SANTA FE','HYUNDAI');
Insert into PARKINGISTA.MARCA (COD_MARCA,MODELO,MARCA) values ('118','VENUE','HYUNDAI');
Insert into PARKINGISTA.MARCA (COD_MARCA,MODELO,MARCA) values ('119','NEXO','HYUNDAI');
Insert into PARKINGISTA.MARCA (COD_MARCA,MODELO,MARCA) values ('120','YARIS','TOYOTA');
Insert into PARKINGISTA.MARCA (COD_MARCA,MODELO,MARCA) values ('121','COROLLA','TOYOTA');
Insert into PARKINGISTA.MARCA (COD_MARCA,MODELO,MARCA) values ('122','RAV','TOYOTA');
Insert into PARKINGISTA.MARCA (COD_MARCA,MODELO,MARCA) values ('123','HILUX','TOYOTA');
Insert into PARKINGISTA.MARCA (COD_MARCA,MODELO,MARCA) values ('124','SUPRA','TOYOTA');
Insert into PARKINGISTA.MARCA (COD_MARCA,MODELO,MARCA) values ('125','A-CLASS','JAC');
Insert into PARKINGISTA.MARCA (COD_MARCA,MODELO,MARCA) values ('126','HFC','JAC');
Insert into PARKINGISTA.MARCA (COD_MARCA,MODELO,MARCA) values ('127','SUNRAY','JAC');
Insert into PARKINGISTA.MARCA (COD_MARCA,MODELO,MARCA) values ('128','T6','JAC');
Insert into PARKINGISTA.MARCA (COD_MARCA,MODELO,MARCA) values ('129','ALASKAN','RENAULT');
Insert into PARKINGISTA.MARCA (COD_MARCA,MODELO,MARCA) values ('130','CAPTUR','RENAULT');
Insert into PARKINGISTA.MARCA (COD_MARCA,MODELO,MARCA) values ('131','CLIO','RENAULT');
Insert into PARKINGISTA.MARCA (COD_MARCA,MODELO,MARCA) values ('132','SANDERO','RENAULT');
Insert into PARKINGISTA.MARCA (COD_MARCA,MODELO,MARCA) values ('133','LOGAN','RENAULT');
Insert into PARKINGISTA.MARCA (COD_MARCA,MODELO,MARCA) values ('134','STEPWAY','RENAULT');
Insert into PARKINGISTA.MARCA (COD_MARCA,MODELO,MARCA) values ('135','DUSTER','RENAULT');
Insert into PARKINGISTA.MARCA (COD_MARCA,MODELO,MARCA) values ('136','TWIZY','RENAULT');
Insert into PARKINGISTA.MARCA (COD_MARCA,MODELO,MARCA) values ('137','ALTIMA','NISSAN');
Insert into PARKINGISTA.MARCA (COD_MARCA,MODELO,MARCA) values ('138','FRONTIER','NISSAN');
Insert into PARKINGISTA.MARCA (COD_MARCA,MODELO,MARCA) values ('139','KICKS','NISSAN');
Insert into PARKINGISTA.MARCA (COD_MARCA,MODELO,MARCA) values ('140','PATHFINDER','NISSAN');
Insert into PARKINGISTA.MARCA (COD_MARCA,MODELO,MARCA) values ('141','QUASQAI','NISSAN');
Insert into PARKINGISTA.MARCA (COD_MARCA,MODELO,MARCA) values ('142','VERSA','NISSAN');
Insert into PARKINGISTA.MARCA (COD_MARCA,MODELO,MARCA) values ('143','X-TRAIL','NISSAN');
Insert into PARKINGISTA.MARCA (COD_MARCA,MODELO,MARCA) values ('144','VITARA','CHEVROLET');
Insert into PARKINGISTA.MARCA (COD_MARCA,MODELO,MARCA) values ('102','CAPTIVA','CHEVROLET');
Insert into PARKINGISTA.MARCA (COD_MARCA,MODELO,MARCA) values ('103','TUCSON','HYUNDAI');
Insert into PARKINGISTA.MARCA (COD_MARCA,MODELO,MARCA) values ('104','ELANTRA','HYUNDAI');
Insert into PARKINGISTA.MARCA (COD_MARCA,MODELO,MARCA) values ('105','AVEO','CHEVROLET');
REM INSERTING into PARKINGISTA.PERSONA
SET DEFINE OFF;
Insert into PARKINGISTA.PERSONA (CEDULA,NOMBRE,APELLIDO,CELULAR,CORREO,SEXO,FECHA_NACIMIENTO,EDAD,ELIMINADO) values ('0150563633','James','Plasencia','0959657942','jamesplasencia@gmail.com','M',to_date('05/11/00','DD/MM/RR'),'19','1');
Insert into PARKINGISTA.PERSONA (CEDULA,NOMBRE,APELLIDO,CELULAR,CORREO,SEXO,FECHA_NACIMIENTO,EDAD,ELIMINADO) values ('0104244945','STEVE','ROGERS','0986573214','stever19@gmail.com','M',to_date('14/03/98','DD/MM/RR'),'22','1');
Insert into PARKINGISTA.PERSONA (CEDULA,NOMBRE,APELLIDO,CELULAR,CORREO,SEXO,FECHA_NACIMIENTO,EDAD,ELIMINADO) values ('0565515132','SARA','CASILLAS','0958223252','saritacas@gmail.com','F',to_date('07/10/00','DD/MM/RR'),'20','1');
Insert into PARKINGISTA.PERSONA (CEDULA,NOMBRE,APELLIDO,CELULAR,CORREO,SEXO,FECHA_NACIMIENTO,EDAD,ELIMINADO) values ('0284845121','VICTOR','CASILLAS','0955959563','victorcsq@gmail.com','M',to_date('06/05/90','DD/MM/RR'),'30','1');
Insert into PARKINGISTA.PERSONA (CEDULA,NOMBRE,APELLIDO,CELULAR,CORREO,SEXO,FECHA_NACIMIENTO,EDAD,ELIMINADO) values ('0304858541','JUAN','RODRIGUEZ','0989090545','rodriguezj@yahoo.es','M',to_date('01/10/85','DD/MM/RR'),'35','1');
Insert into PARKINGISTA.PERSONA (CEDULA,NOMBRE,APELLIDO,CELULAR,CORREO,SEXO,FECHA_NACIMIENTO,EDAD,ELIMINADO) values ('1212121324','JAMES','PRUEBA','0959595959','james@hotmail.com','M',to_date('09/10/20','DD/MM/RR'),'0','1');
Insert into PARKINGISTA.PERSONA (CEDULA,NOMBRE,APELLIDO,CELULAR,CORREO,SEXO,FECHA_NACIMIENTO,EDAD,ELIMINADO) values ('0150691772','ELIAN','VEGA','0939376021','elianvega@gmail.com','M',to_date('22/03/99','DD/MM/RR'),'21','1');
Insert into PARKINGISTA.PERSONA (CEDULA,NOMBRE,APELLIDO,CELULAR,CORREO,SEXO,FECHA_NACIMIENTO,EDAD,ELIMINADO) values ('0103055523','SAMANTHA','CABRERA','0959325689','samycab@gmail.com','F',to_date('20/05/95','DD/MM/RR'),'25','1');
Insert into PARKINGISTA.PERSONA (CEDULA,NOMBRE,APELLIDO,CELULAR,CORREO,SEXO,FECHA_NACIMIENTO,EDAD,ELIMINADO) values ('0305545648','KATHERINE','SEGARRA','0985848945','katys1999@gmail.com','F',to_date('08/05/99','DD/MM/RR'),'21','1');
Insert into PARKINGISTA.PERSONA (CEDULA,NOMBRE,APELLIDO,CELULAR,CORREO,SEXO,FECHA_NACIMIENTO,EDAD,ELIMINADO) values ('0304505054','JORGE','PEREZ','0995985145','jorgepereza@hotmail.com','M',to_date('05/03/80','DD/MM/RR'),'40','1');
Insert into PARKINGISTA.PERSONA (CEDULA,NOMBRE,APELLIDO,CELULAR,CORREO,SEXO,FECHA_NACIMIENTO,EDAD,ELIMINADO) values ('0123456789','JUAN','PEREZ','0987654321','juanperez@hotmail.com','M',to_date('01/01/99','DD/MM/RR'),'21','1');
Insert into PARKINGISTA.PERSONA (CEDULA,NOMBRE,APELLIDO,CELULAR,CORREO,SEXO,FECHA_NACIMIENTO,EDAD,ELIMINADO) values ('0245869401','ANGEL','MENDOZA','0986254615','angelM@yahoo.com','M',to_date('25/10/01','DD/MM/RR'),'18','1');
REM INSERTING into PARKINGISTA.REGISTRO
SET DEFINE OFF;
Insert into PARKINGISTA.REGISTRO (COD_REGISTRO,USUARIO,CLAVE) values ('100','0150563633','12345');
Insert into PARKINGISTA.REGISTRO (COD_REGISTRO,USUARIO,CLAVE) values ('101','0104244945','54321');
Insert into PARKINGISTA.REGISTRO (COD_REGISTRO,USUARIO,CLAVE) values ('102','0150691772','54321');
REM INSERTING into PARKINGISTA.TIPO_CLIENTE
SET DEFINE OFF;
Insert into PARKINGISTA.TIPO_CLIENTE (COD_TIPO,TIPO_CLIENTE) values ('100','ESTUDIANTE');
Insert into PARKINGISTA.TIPO_CLIENTE (COD_TIPO,TIPO_CLIENTE) values ('102','ADMINISTRATIVO');
Insert into PARKINGISTA.TIPO_CLIENTE (COD_TIPO,TIPO_CLIENTE) values ('104','DOCENTE');
REM INSERTING into PARKINGISTA.TRANSACCIONES_VEHICULARES
SET DEFINE OFF;
Insert into PARKINGISTA.TRANSACCIONES_VEHICULARES (COD_TRANSACCION,HORA_ENTRADA_V,FECHA,PLACA) values ('100',to_timestamp('01:45:05','HH24:MI:SS'),to_date('20/10/20','DD/MM/RR'),'TCS895');
Insert into PARKINGISTA.TRANSACCIONES_VEHICULARES (COD_TRANSACCION,HORA_ENTRADA_V,FECHA,PLACA) values ('104',to_timestamp('08:58:07','HH24:MI:SS'),to_date('20/10/20','DD/MM/RR'),'TCS895');
Insert into PARKINGISTA.TRANSACCIONES_VEHICULARES (COD_TRANSACCION,HORA_ENTRADA_V,FECHA,PLACA) values ('101',to_timestamp('08:02:56','HH24:MI:SS'),to_date('20/10/20','DD/MM/RR'),'TCS895');
Insert into PARKINGISTA.TRANSACCIONES_VEHICULARES (COD_TRANSACCION,HORA_ENTRADA_V,FECHA,PLACA) values ('103',to_timestamp('08:47:07','HH24:MI:SS'),to_date('20/10/20','DD/MM/RR'),'TCS895');
Insert into PARKINGISTA.TRANSACCIONES_VEHICULARES (COD_TRANSACCION,HORA_ENTRADA_V,FECHA,PLACA) values ('102',to_timestamp('08:07:34','HH24:MI:SS'),to_date('20/10/20','DD/MM/RR'),'PP587A0');
REM INSERTING into PARKINGISTA.VEHICULO_COLOR
SET DEFINE OFF;
Insert into PARKINGISTA.VEHICULO_COLOR (COD_COLOR,COLOR) values ('#000000','NEGRO');
Insert into PARKINGISTA.VEHICULO_COLOR (COD_COLOR,COLOR) values ('#0000FF','AZUL');
Insert into PARKINGISTA.VEHICULO_COLOR (COD_COLOR,COLOR) values ('#008000','VERDE');
Insert into PARKINGISTA.VEHICULO_COLOR (COD_COLOR,COLOR) values ('#COCOCO','PLATA');
Insert into PARKINGISTA.VEHICULO_COLOR (COD_COLOR,COLOR) values ('#FF0000','ROJO');
Insert into PARKINGISTA.VEHICULO_COLOR (COD_COLOR,COLOR) values ('#FFFF00','AMARILLO');
Insert into PARKINGISTA.VEHICULO_COLOR (COD_COLOR,COLOR) values ('#FFFFFF','BLANCO');
--------------------------------------------------------
--  DDL for Index AUTOMOVIL_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "PARKINGISTA"."AUTOMOVIL_PK" ON "PARKINGISTA"."AUTOMOVIL" ("PLACA") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index CLIENTE_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "PARKINGISTA"."CLIENTE_PK" ON "PARKINGISTA"."CLIENTE" ("COD_CLIENTE") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index EMPLEADO_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "PARKINGISTA"."EMPLEADO_PK" ON "PARKINGISTA"."EMPLEADO" ("COD_EMPLEADO") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index HORA_DE_MARCAJE_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "PARKINGISTA"."HORA_DE_MARCAJE_PK" ON "PARKINGISTA"."HORA_DE_MARCAJE" ("COD_HORAS") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index MARCA_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "PARKINGISTA"."MARCA_PK" ON "PARKINGISTA"."MARCA" ("COD_MARCA") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index PERSONA_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "PARKINGISTA"."PERSONA_PK" ON "PARKINGISTA"."PERSONA" ("CEDULA") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index TABLE1_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "PARKINGISTA"."TABLE1_PK" ON "PARKINGISTA"."REGISTRO" ("COD_REGISTRO") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index TIPO_CLIENTE_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "PARKINGISTA"."TIPO_CLIENTE_PK" ON "PARKINGISTA"."TIPO_CLIENTE" ("COD_TIPO") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index TRANSACCIONES_VEHICULARES_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "PARKINGISTA"."TRANSACCIONES_VEHICULARES_PK" ON "PARKINGISTA"."TRANSACCIONES_VEHICULARES" ("COD_TRANSACCION") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index VEHICULO_COLOR_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "PARKINGISTA"."VEHICULO_COLOR_PK" ON "PARKINGISTA"."VEHICULO_COLOR" ("COD_COLOR") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index COLORUNICO
--------------------------------------------------------

  CREATE UNIQUE INDEX "PARKINGISTA"."COLORUNICO" ON "PARKINGISTA"."VEHICULO_COLOR" ("COLOR") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Trigger NUEVOCLIENTE
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE TRIGGER "PARKINGISTA"."NUEVOCLIENTE" 
before INSERT on CLIENTE FOR EACH ROW
BEGIN 
    SELECT MAX(COD_CLIENTE) + 1 into :new.COD_CLIENTE FROM CLIENTE;
    if :new.COD_CLIENTE IS NULL THEN
    :new.COD_CLIENTE := 100;
    end if;
END NuevoCliente;

/
ALTER TRIGGER "PARKINGISTA"."NUEVOCLIENTE" ENABLE;
--------------------------------------------------------
--  DDL for Trigger NUEVOEMPLEADO
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE TRIGGER "PARKINGISTA"."NUEVOEMPLEADO" 
before INSERT on EMPLEADO FOR EACH ROW
BEGIN 
    SELECT MAX(COD_EMPLEADO) + 1 into :new.COD_EMPLEADO FROM EMPLEADO;
    if :new.COD_EMPLEADO IS NULL THEN
    :new.COD_EMPLEADO := 100;
    end if;
END NuevoEmpleado;

/
ALTER TRIGGER "PARKINGISTA"."NUEVOEMPLEADO" ENABLE;
--------------------------------------------------------
--  DDL for Trigger NUEVOHORAMARCAJE
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE TRIGGER "PARKINGISTA"."NUEVOHORAMARCAJE" 
before INSERT on Hora_de_marcaje FOR EACH ROW
BEGIN 
    SELECT MAX(COD_HORAS) + 1 into :new.COD_HORAS FROM hora_de_marcaje;
    if :new.COD_Horas IS NULL THEN
    :new.COD_HORAS := 100;
    end if;
END NuevoHoraMarcaje;

/
ALTER TRIGGER "PARKINGISTA"."NUEVOHORAMARCAJE" ENABLE;
--------------------------------------------------------
--  DDL for Trigger NUEVOMARCA
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE TRIGGER "PARKINGISTA"."NUEVOMARCA" 
before INSERT on MARCA FOR EACH ROW
BEGIN 
    SELECT MAX(COD_MARCA) + 1 into :new.COD_MARCA FROM marca;
    if :new.COD_MARCA IS NULL THEN
    :new.COD_MARCA := 100;
    end if;
END NuevoMarca;

/
ALTER TRIGGER "PARKINGISTA"."NUEVOMARCA" ENABLE;
--------------------------------------------------------
--  DDL for Trigger NUEVOREGSITRO
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE TRIGGER "PARKINGISTA"."NUEVOREGSITRO" 
before INSERT on REGISTRO FOR EACH ROW
BEGIN 
    SELECT MAX(COD_REGISTRO) + 1 into :new.COD_REGISTRO FROM REGISTRO;
    if :new.COD_REGISTRO IS NULL THEN
    :new.COD_REGISTRO := 100;
    end if;
END NuevoRegistro;
-------------------

/
ALTER TRIGGER "PARKINGISTA"."NUEVOREGSITRO" ENABLE;
--------------------------------------------------------
--  DDL for Trigger NUEVOTIPOCLIENTE
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE TRIGGER "PARKINGISTA"."NUEVOTIPOCLIENTE" 
before INSERT on TIPO_CLIENTE FOR EACH ROW
BEGIN 
    SELECT MAX(COD_TIPO) + 1 into :new.COD_TIPO FROM Tipo_cliente;
    if :new.COD_Tipo IS NULL THEN
    :new.COD_TIPO := 100;
    end if;
END NuevoTipoCliente;

/
ALTER TRIGGER "PARKINGISTA"."NUEVOTIPOCLIENTE" ENABLE;
--------------------------------------------------------
--  DDL for Trigger NUEVOTRANSACCION
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE TRIGGER "PARKINGISTA"."NUEVOTRANSACCION" 
before INSERT on TRANSACCIONES_VEHICULARES FOR EACH ROW
BEGIN 
    SELECT MAX(COD_TRANSACCION) + 1 into :new.COD_TRANSACCION FROM transacciones_vehiculares;
    if :new.COD_TRANSACCION IS NULL THEN
    :new.COD_TRANSACCION := 100;
    end if;
END NuevoTransaccion;

/
ALTER TRIGGER "PARKINGISTA"."NUEVOTRANSACCION" ENABLE;
--------------------------------------------------------
--  DDL for Procedure INSERTARTRANSACCION
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "PARKINGISTA"."INSERTARTRANSACCION" (p_cod_transaccion varchar2)
is 
    V_TEMP  BLOB;
    V_BFILE BFILE;
BEGIN
    UPDATE TRANSACCIONES_VEHICULARES SET FOTO = EMPTY_BLOB() WHERE COD_TRANSACCION = p_cod_transaccion RETURNING FOTO INTO V_TEMP ;

    V_BFILE := BFILENAME('OBJETOSLOB', 'Foto.jpg');
    DBMS_LOB.OPEN(V_BFILE, DBMS_LOB.LOB_READONLY);
    DBMS_LOB.LOADFROMFILE(V_TEMP, V_BFILE, DBMS_LOB.GETLENGTH(V_BFILE));
    DBMS_LOB.CLOSE(V_BFILE);
    COMMIT;    
END;

/
--------------------------------------------------------
--  DDL for Function CALCULAHORASTARDE
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE FUNCTION "PARKINGISTA"."CALCULAHORASTARDE" (p_hora_entro in VARCHAR2, p_hora_entrada_pre in varchar2)
return number
is 
v_resultado number;
begin
    v_resultado:=extract(hour from((To_timestamp(p_hora_entro,'HH24:MI:SS') - To_timestamp(p_hora_entrada_pre,'HH24:MI:SS'))));
    return v_resultado;
end;

/
--------------------------------------------------------
--  DDL for Function CALCULAHORASTRABAJADAS
--------------------------------------------------------

  CREATE OR REPLACE NONEDITIONABLE FUNCTION "PARKINGISTA"."CALCULAHORASTRABAJADAS" (p_hora_entro in VARCHAR2, p_hora_salio in VARCHAR2)
return number
is 
v_resultado number;
begin
    v_resultado:=extract(hour from((To_timestamp(p_hora_salio,'HH24:MI:SS') - To_timestamp(p_hora_entro,'HH24:MI:SS'))));
    return v_resultado;
end;

/
--------------------------------------------------------
--  Constraints for Table REGISTRO
--------------------------------------------------------

  ALTER TABLE "PARKINGISTA"."REGISTRO" MODIFY ("COD_REGISTRO" NOT NULL ENABLE);
  ALTER TABLE "PARKINGISTA"."REGISTRO" MODIFY ("USUARIO" NOT NULL ENABLE);
  ALTER TABLE "PARKINGISTA"."REGISTRO" MODIFY ("CLAVE" NOT NULL ENABLE);
  ALTER TABLE "PARKINGISTA"."REGISTRO" ADD CONSTRAINT "TABLE1_PK" PRIMARY KEY ("COD_REGISTRO")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table CLIENTE
--------------------------------------------------------

  ALTER TABLE "PARKINGISTA"."CLIENTE" MODIFY ("COD_CLIENTE" NOT NULL ENABLE);
  ALTER TABLE "PARKINGISTA"."CLIENTE" ADD CONSTRAINT "CLIENTE_PK" PRIMARY KEY ("COD_CLIENTE")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "PARKINGISTA"."CLIENTE" MODIFY ("COD_TIPO_CLIENTE" NOT NULL ENABLE);
  ALTER TABLE "PARKINGISTA"."CLIENTE" MODIFY ("CEDULA_CLIENTE" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table HORA_DE_MARCAJE
--------------------------------------------------------

  ALTER TABLE "PARKINGISTA"."HORA_DE_MARCAJE" MODIFY ("COD_HORAS" NOT NULL ENABLE);
  ALTER TABLE "PARKINGISTA"."HORA_DE_MARCAJE" ADD CONSTRAINT "HORA_DE_MARCAJE_PK" PRIMARY KEY ("COD_HORAS")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table AUTOMOVIL
--------------------------------------------------------

  ALTER TABLE "PARKINGISTA"."AUTOMOVIL" MODIFY ("PLACA" NOT NULL ENABLE);
  ALTER TABLE "PARKINGISTA"."AUTOMOVIL" MODIFY ("COD_CLIENTE" NOT NULL ENABLE);
  ALTER TABLE "PARKINGISTA"."AUTOMOVIL" ADD CONSTRAINT "AUTOMOVIL_PK" PRIMARY KEY ("PLACA")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "PARKINGISTA"."AUTOMOVIL" MODIFY ("COD_COLOR" NOT NULL ENABLE);
  ALTER TABLE "PARKINGISTA"."AUTOMOVIL" MODIFY ("COD_MARCA" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table EMPLEADO
--------------------------------------------------------

  ALTER TABLE "PARKINGISTA"."EMPLEADO" MODIFY ("COD_EMPLEADO" NOT NULL ENABLE);
  ALTER TABLE "PARKINGISTA"."EMPLEADO" MODIFY ("CEDULA_EMPLEADO" NOT NULL ENABLE);
  ALTER TABLE "PARKINGISTA"."EMPLEADO" ADD CONSTRAINT "EMPLEADO_PK" PRIMARY KEY ("COD_EMPLEADO")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table TIPO_CLIENTE
--------------------------------------------------------

  ALTER TABLE "PARKINGISTA"."TIPO_CLIENTE" MODIFY ("COD_TIPO" NOT NULL ENABLE);
  ALTER TABLE "PARKINGISTA"."TIPO_CLIENTE" ADD CONSTRAINT "TIPO_CLIENTE_PK" PRIMARY KEY ("COD_TIPO")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table VEHICULO_COLOR
--------------------------------------------------------

  ALTER TABLE "PARKINGISTA"."VEHICULO_COLOR" MODIFY ("COD_COLOR" NOT NULL ENABLE);
  ALTER TABLE "PARKINGISTA"."VEHICULO_COLOR" ADD CONSTRAINT "VEHICULO_COLOR_PK" PRIMARY KEY ("COD_COLOR")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "PARKINGISTA"."VEHICULO_COLOR" MODIFY ("COLOR" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table TRANSACCIONES_VEHICULARES
--------------------------------------------------------

  ALTER TABLE "PARKINGISTA"."TRANSACCIONES_VEHICULARES" MODIFY ("COD_TRANSACCION" NOT NULL ENABLE);
  ALTER TABLE "PARKINGISTA"."TRANSACCIONES_VEHICULARES" MODIFY ("PLACA" NOT NULL ENABLE);
  ALTER TABLE "PARKINGISTA"."TRANSACCIONES_VEHICULARES" ADD CONSTRAINT "TRANSACCIONES_VEHICULARES_PK" PRIMARY KEY ("COD_TRANSACCION")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table PERSONA
--------------------------------------------------------

  ALTER TABLE "PARKINGISTA"."PERSONA" MODIFY ("CEDULA" NOT NULL ENABLE);
  ALTER TABLE "PARKINGISTA"."PERSONA" ADD CONSTRAINT "PERSONA_PK" PRIMARY KEY ("CEDULA")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table MARCA
--------------------------------------------------------

  ALTER TABLE "PARKINGISTA"."MARCA" MODIFY ("COD_MARCA" NOT NULL ENABLE);
  ALTER TABLE "PARKINGISTA"."MARCA" ADD CONSTRAINT "MARCA_PK" PRIMARY KEY ("COD_MARCA")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table AUTOMOVIL
--------------------------------------------------------

  ALTER TABLE "PARKINGISTA"."AUTOMOVIL" ADD CONSTRAINT "AUTOMOVIL_FK_CLIENTE" FOREIGN KEY ("COD_CLIENTE")
	  REFERENCES "PARKINGISTA"."CLIENTE" ("COD_CLIENTE") ENABLE;
  ALTER TABLE "PARKINGISTA"."AUTOMOVIL" ADD CONSTRAINT "AUTOMOVIL_FK_MARCA" FOREIGN KEY ("COD_MARCA")
	  REFERENCES "PARKINGISTA"."MARCA" ("COD_MARCA") ENABLE;
  ALTER TABLE "PARKINGISTA"."AUTOMOVIL" ADD CONSTRAINT "AUTOMOVIL_FK_COLOR" FOREIGN KEY ("COD_COLOR")
	  REFERENCES "PARKINGISTA"."VEHICULO_COLOR" ("COD_COLOR") ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table CLIENTE
--------------------------------------------------------

  ALTER TABLE "PARKINGISTA"."CLIENTE" ADD CONSTRAINT "CLIENTE_FK_PERSONA" FOREIGN KEY ("CEDULA_CLIENTE")
	  REFERENCES "PARKINGISTA"."PERSONA" ("CEDULA") ENABLE;
  ALTER TABLE "PARKINGISTA"."CLIENTE" ADD CONSTRAINT "CLIENTE_TIPO_FK" FOREIGN KEY ("COD_TIPO_CLIENTE")
	  REFERENCES "PARKINGISTA"."TIPO_CLIENTE" ("COD_TIPO") ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table EMPLEADO
--------------------------------------------------------

  ALTER TABLE "PARKINGISTA"."EMPLEADO" ADD CONSTRAINT "EMPLEADO_FK_PERSONA" FOREIGN KEY ("CEDULA_EMPLEADO")
	  REFERENCES "PARKINGISTA"."PERSONA" ("CEDULA") ENABLE;
  ALTER TABLE "PARKINGISTA"."EMPLEADO" ADD CONSTRAINT "EMPLEADO_FK_REGISTRO" FOREIGN KEY ("COD_REGISTRO")
	  REFERENCES "PARKINGISTA"."REGISTRO" ("COD_REGISTRO") ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table HORA_DE_MARCAJE
--------------------------------------------------------

  ALTER TABLE "PARKINGISTA"."HORA_DE_MARCAJE" ADD CONSTRAINT "HORA_DE_MARCAJE_REGSITRO" FOREIGN KEY ("COD_REGISTRO")
	  REFERENCES "PARKINGISTA"."REGISTRO" ("COD_REGISTRO") ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table TRANSACCIONES_VEHICULARES
--------------------------------------------------------

  ALTER TABLE "PARKINGISTA"."TRANSACCIONES_VEHICULARES" ADD CONSTRAINT "TRANSACCIONES_VEHICULARES_FK1" FOREIGN KEY ("PLACA")
	  REFERENCES "PARKINGISTA"."AUTOMOVIL" ("PLACA") ENABLE;
